<div class="viewer">
  <section class="controls app-surface">
    <div class="controls-head">
      <p class="eyebrow">Table Explorer</p>
      <h1>League Table Viewer</h1>
    </div>
    <div class="selectors">
      <mat-form-field class="field" appearance="fill">
        <mat-label>Select Year</mat-label>
        <mat-icon matPrefix>calendar_today</mat-icon>
        <mat-select [(value)]="selectedYear" (selectionChange)="onYearChange($event.value)">
          @for (year of years; track year) {
          <mat-option [value]="year">{{ year }}</mat-option>
          } @empty {
          <mat-option disabled>No Seasons Available</mat-option>
          }
        </mat-select>
      </mat-form-field>

      @if (leaguesForYear.length > 0) {
      <mat-form-field class="field" appearance="fill">
        <mat-label>Select League</mat-label>
        <mat-icon matPrefix>sports_soccer</mat-icon>
        <mat-select [(value)]="selectedLeague">
          @for (league of leaguesForYear; track league) {
          <mat-option [value]="league">{{ league | leagueTierToStringy }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
      }
    </div>
  </section>

  @if (currentTable && selectedLeague) {
  <section class="results">
    <h2>{{ selectedYear }} Season Results - {{ selectedLeague | leagueTierToStringy }}</h2>
    <app-season-summary-card [tableData]="currentTable" />
    <app-league-table [leagueTable]="currentTable" />
  </section>
  }
</div>
