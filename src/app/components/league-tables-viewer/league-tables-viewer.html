<div class="flex flex-col items-center py-8">
  <mat-card class="w-full max-w-xl shadow-lg">
    <mat-card-header>
      <mat-card-title>
        <mat-icon color="primary" class="mr-2">table_chart</mat-icon>
        League Table Viewer
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <div class="flex flex-col md:flex-row md:space-x-6 space-y-4 md:space-y-0 py-4">
        <!-- Year Selector -->
        <mat-form-field class="flex-1 min-w-[180px]">
          <mat-label>Select Year</mat-label>
          <span matPrefix>
            <mat-icon class="mr-2">calendar_today</mat-icon>
          </span>
          <mat-select [(value)]="selectedYear" (selectionChange)="onYearChange($event.value)">
            @for (year of years; track year) {
            <mat-option [value]="year">{{ year }}</mat-option>
            } @empty {
            <mat-option disabled>No Seasons Available</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <!-- League Selector -->
        @if (leaguesForYear.length > 0) {
        <mat-form-field class="flex-1 min-w-[180px]">
          <mat-label>Select League</mat-label>
          <span matPrefix>
            <mat-icon class="mr-2">sports_soccer</mat-icon>
          </span>
          <mat-select [(value)]="selectedLeague">
            @for (league of leaguesForYear; track league) {
            <mat-option [value]="league">{{ league | leagueTierToStringy}}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        }
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Show Table if both selectors chosen -->
  @if (currentTable && selectedLeague) {
  <div class="w-full max-w-3xl">
    <h1 class="my-6 text-2xl font-bold text-center">
      {{selectedYear}} Season Results - {{selectedLeague | leagueTierToStringy}}
    </h1>
    <app-season-summary-card [tableData]="currentTable"></app-season-summary-card>
    <div class="my-5">
      <app-league-table [leagueTable]="currentTable"></app-league-table>
    </div>
  </div>
  }
</div>
